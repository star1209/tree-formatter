"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PluginManager=void 0;exports.PluginManager=class{constructor(){this.plugins=new Map}register(e){this.plugins.has(e.name)&&console.warn(`插件 "${e.name}" 已存在，将被覆盖`),this.plugins.set(e.name,e)}unregister(e){return this.plugins.delete(e)}getPlugin(e){return this.plugins.get(e)}getAllPlugins(){return Array.from(this.plugins.values()).sort((e,t)=>(e.priority||100)-(t.priority||100))}applyNodeCreated(e,t){let r=e;for(const e of this.getAllPlugins())e.onNodeCreated&&e.onNodeCreated(r,t);return r}applyNodeLinked(e,t,r){let n=!0;for(const i of this.getAllPlugins())if(i.onNodeLinked){if(!1===i.onNodeLinked(e,t,r)){n=!1;break}}return n}applyTreeBuilt(e,t){let r=e;for(const e of this.getAllPlugins())if(e.onTreeBuilt){const n=e.onTreeBuilt(r,t);n&&(r=n)}return r}clear(){this.plugins.clear()}get count(){return this.plugins.size}};
//# sourceMappingURL=index.js.map
